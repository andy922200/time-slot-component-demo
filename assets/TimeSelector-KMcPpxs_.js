import{d as R,a as M,r as o,c as W,o as X,b as n,e as t,t as a,F as v,f as h,w as d,v as E,g as S,u as Z,h as ee,i}from"./index-BN4XCwYM.js";import{g as te,c as se,a as ae,b as le}from"./time-selector-D1VBJ9xa.js";import"./index-CSaXsr8O.js";const oe={class:"w-full"},ne={class:"flex items-center justify-center"},ie={class:"m-2"},re={class:"flex flex-wrap items-center justify-center"},ue={class:"m-2 flex flex-wrap"},de={class:"mx-2"},me={for:"generate-cross-day"},ce={class:"mx-2"},ve={for:"is-now-active"},he={class:"flex flex-wrap items-center justify-center"},ge={class:"m-2"},pe={for:"time-sector"},fe=["value"],Te={class:"m-2"},_e={for:"min-usage-hours"},ye=["value"],Se={class:"m-2"},we={for:"max-usage-hours"},be=["value"],$e={class:"flex flex-wrap items-center justify-center"},Ce={class:"m-2"},ke={for:"date-picker"},xe={class:"m-2"},De={for:"start-time-picker"},Ue=["disabled"],Oe=["value"],je={class:"m-2"},He={for:"end-time-picker"},Ve=["disabled"],Ae=["value"],Me={class:"flex flex-wrap items-center justify-center"},Ee={class:"my-2 w-full text-center"},Fe={class:"my-2 w-full text-center"},r="YYYY-MM-DD",Ie=R({name:"DemoTimeSelector",__name:"TimeSelector",setup(Ne){const g=M(),F=g.subtract(1,"day"),H=g.add(1,"day"),u=o(g.format(r)),p=o(""),f=o(null),C=o(""),T=o([]),w=o([]),b=o([]),k=o(24),_=o(.5),m=o(30),x=o(!0),D=o(!0),y=o([]),N=Array.from({length:24},(s,l)=>l+1),U=W(()=>Array.from({length:1/(m.value/60)},(l,e)=>(e+1)*(m.value/60))),Y=[15,30,60],B=async()=>(await new Promise(s=>setTimeout(s,500)),[{startTime:"21:00",endTime:"22:30",date:F.format(r)},{startTime:"08:00",endTime:"08:30",date:g.format(r)},{startTime:"23:00",endTime:"23:30",date:g.format(r)},{startTime:"00:00",endTime:"00:50",date:H.format(r)},{startTime:"20:30",endTime:"23:30",date:H.format(r)}]);X(async()=>{const s=await B();y.value=s,A()});const G=()=>{I(),O(),c()},I=()=>{T.value=[]},O=()=>{w.value=[],p.value=""},c=()=>{b.value=[],f.value=null,C.value=""},V=()=>{T.value=te({targetDate:u.value,timeSector:m.value,dateFormat:r}),se({timeSlots:T.value,usedTimeSlots:y.value,targetDate:u.value,dateFormat:r})},j=()=>{const s=ae({allTimeSlots:T.value,targetDate:u.value,usedTimeSlots:y.value,isNowActive:D.value,timeSector:m.value,dateFormat:r});w.value=s},$=()=>{const s=le({startTime:p.value,allTimeSlots:T.value,targetDate:u.value,usedTimeSlots:y.value,maxUsageHours:k.value,minUsageHours:_.value,timeSector:m.value,generateCrossDay:x.value,dateFormat:r});b.value=s},A=()=>{G(),V(),j()},L=()=>{c(),$()},P=()=>{if(!f.value)return;const[s,l]=f.value.label.split("_");C.value=l==="next-day"?`${M(u.value).add(1,"day").format(r)} ${s}`:`${u.value} ${s}`},q=()=>{c(),$()},z=()=>{c(),$()},J=()=>{U.value.includes(_.value)||(_.value=U.value[0]),O(),c(),V(),j()},K=()=>{c(),$()},Q=()=>{O(),c(),j()};return(s,l)=>(i(),n("div",oe,[l[8]||(l[8]=t("h1",{class:"text-center text-lg"},"Time Selector 選擇器",-1)),t("div",ne,[t("h3",ie,a(s.$t("used-time-slots")),1),t("ul",null,[(i(!0),n(v,null,h(y.value,e=>(i(),n("li",{key:e.startTime},[t("p",null,a(e.date)+" "+a(e.startTime)+" ~ "+a(e.endTime),1)]))),128))])]),t("div",re,[t("div",ue,[t("div",de,[t("label",me,a(s.$t("generate-cross-day"))+"：",1),d(t("input",{id:"generate-cross-day","onUpdate:modelValue":l[0]||(l[0]=e=>x.value=e),type:"checkbox",onChange:K},null,544),[[E,x.value]])]),t("div",ce,[t("label",ve,a(s.$t("is-now-active"))+"：",1),d(t("input",{id:"is-now-active","onUpdate:modelValue":l[1]||(l[1]=e=>D.value=e),type:"checkbox",onChange:Q},null,544),[[E,D.value]])])])]),t("div",he,[t("div",ge,[t("label",pe,a(s.$t("time-sector"))+"：",1),d(t("select",{id:"time-sector","onUpdate:modelValue":l[2]||(l[2]=e=>m.value=e),class:"min-w-32",onChange:J},[(i(),n(v,null,h(Y,e=>t("option",{key:e,value:e},a(e)+" "+a(s.$t("minutes")),9,fe)),64))],544),[[S,m.value]])]),t("div",Te,[t("label",_e,a(s.$t("min-usage-hours"))+"：",1),d(t("select",{id:"min-usage-hours","onUpdate:modelValue":l[3]||(l[3]=e=>_.value=e),class:"min-w-32",onChange:q},[(i(!0),n(v,null,h(U.value,e=>(i(),n("option",{key:e,value:e},a(e)+" "+a(s.$t("hours")),9,ye))),128))],544),[[S,_.value]])]),t("div",Se,[t("label",we,a(s.$t("max-usage-hours"))+"：",1),d(t("select",{id:"max-usage-hours","onUpdate:modelValue":l[4]||(l[4]=e=>k.value=e),class:"min-w-32",onChange:z},[(i(!0),n(v,null,h(Z(N),e=>(i(),n("option",{key:e,value:e},a(e)+" "+a(s.$t("hours")),9,be))),128))],544),[[S,k.value]])])]),t("div",$e,[t("div",Ce,[t("label",ke,a(s.$t("date"))+"：",1),d(t("input",{id:"date-picker","onUpdate:modelValue":l[5]||(l[5]=e=>u.value=e),type:"date",onChange:A},null,544),[[ee,u.value]])]),t("div",xe,[t("label",De,a(s.$t("start-time"))+"：",1),d(t("select",{id:"start-time-picker","onUpdate:modelValue":l[6]||(l[6]=e=>p.value=e),disabled:w.value.length===0,class:"min-w-32",onChange:L},[(i(!0),n(v,null,h(w.value,e=>(i(),n("option",{key:e.value,value:e.value},a(e.value==="Now"?s.$t("now"):e.label),9,Oe))),128))],40,Ue),[[S,p.value]])]),t("div",je,[t("label",He,a(s.$t("end-time"))+"：",1),d(t("select",{id:"end-time-picker","onUpdate:modelValue":l[7]||(l[7]=e=>f.value=e),disabled:b.value.length===0,class:"min-w-32",onChange:P},[(i(!0),n(v,null,h(b.value,e=>(i(),n("option",{key:e.value,value:e},a(e.label.includes("next-day")?`${e.label.split("_")[0]} ${s.$t(`${e.label.split("_")[1]}`)}`:e.label),9,Ae))),128))],40,Ve),[[S,f.value]])])]),t("div",Me,[t("p",Ee,a(s.$t("selected-start-dateTime"))+"： "+a(u.value)+" "+a(p.value),1),t("p",Fe,a(s.$t("selected-end-dateTime"))+"： "+a(C.value),1)])]))}});export{Ie as default};
